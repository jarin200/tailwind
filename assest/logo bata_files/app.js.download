!function(){"use strict";const t="BESYh0svds4SlmJoOHFi67xcJWnhj8G_jhOKnejKdYRt_f1sBnOxl1D8u0ROIrXt6tgT3mda8eooLPr1M-TgDAM",n="https://hyunzdvouj.execute-api.ap-south-1.amazonaws.com/prod/pushbot-subscriber-handler",e={SUBSCRIBER_ID:"pushbot_subscriber_id",CUSTOMER_ID:"pushbot_customer_id",CAMPAIGN_ID:"pushbot_campaign_id",MEDIUM:"pushbot_medium",SUBDOMAIN:"pushbot_subdomain",SUBSCRIPTION_KEY:"pushbot_subscription_key",IOS_WIDGET_CLOSED:"ios_widget_closed"},o={CREATE_OR_UPDATE:"create_or_update",IMPRESSION_REACH:"impression_reach",NOTIFICATION_CLICKED:"notification_clicked",NOTIFICATION_CLOSE:"notification_close",PROMPT_OPTIONS:"prompt_options"},i={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"},s={TOP:"top",BOTTOM:"bottom"};async function r(t,e){return fetch(`${n}`,{method:"POST",headers:{"X-SHOPIFY-SHOP":Shopify.shop,"Content-Type":"application/json"},body:JSON.stringify({body:e,event_name:t})}).then((t=>t.json()))}function a(t,n,e){var o;return`\n    <div style="" >\n      <div\n          style="\n          position: fixed;\n          z-index:1111111;\n          min-height: 90px;\n          background-color: #fff;\n          color: #000;\n          padding: 16px;\n          display: flex;\n          flex-direction: column;\n          justify-content: space-between;\n          border-radius:5px;\n          box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n          width: ${t?"85%":"400px"};\n          ${t?(o=n.mobile_position,s.BOTTOM===o?"bottom: 10%; left: 50%; transform: translateX(-50%);":"top: 10%; left: 50%; transform: translateX(-50%);"):function(t){return i.BOTTOM_LEFT===t?"bottom: 10%; left: 5%;":i.BOTTOM_CENTER===t?"bottom: 10%; left:50%; transform: translateX(-50%);":i.BOTTOM_RIGHT===t?"bottom: 10%; right:5%;":i.TOP_CENTER===t?"top: 10%; left: 50%; transform: translateX(-50%);":i.TOP_LEFT===t?"top: 10%; left: 5%;":i.TOP_RIGHT===t?"top: 10%; right: 5%;":void 0}(n.desktop_position)}\n          "\n          >\n          <div style="display: flex">\n            <div style="margin-right: 1rem">\n                <img\n                  src="${e}"\n                  width="35 "\n                  style="border-radius: 50%; border: 1px solid #fff"\n                  />\n            </div>\n            <div style="margin-bottom:1rem;">\n                <div style="font-size: 16px; color: #000;margin-bottom:10px;">${n.custom_options.title}</div>\n                <div style="font-size: 14px; color: #828d99; line-height: normal">\n                  ${n.custom_options.description}\n                </div>\n            </div>\n          </div>\n          <div\n            class="cta-actions"\n            style="text-align:right;"\n            >\n            <button\n                style="\n                color: ${n.custom_options.later_btn.text_color};\n                background-color: ${n.custom_options.later_btn.bg_color};\n                border: none;\n                text-transform: none;\n                border-radius: 3px;\n                font-size: 14px;\n                padding: 0.6rem 1.6rem;\n                margin-right:10px;\n                cursor:pointer;\n                "\n                class="cancel-btn"\n                >\n            ${n.custom_options.later_btn.text}\n            </button>\n            <button\n                style="\n                background-color: ${n.custom_options.allow_btn.bg_color};\n                color: ${n.custom_options.allow_btn.text_color};\n                border: none;\n                text-transform: none;\n                border-radius: 3px;\n                font-size: 14px;\n                padding: 0.6rem 1.6rem;   \n                cursor:pointer;\n                "\n                class="allow-btn"\n                >\n            ${n.custom_options.allow_btn.text}\n            </button>\n          </div>\n      </div>\n    </div>\n    `}async function c(t,n){const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),o=e?t.mobile_timings:t.desktop_timings;let i=a(e,t,n);return new Promise(((t,n)=>{setTimeout((()=>{const n=document.createElement("div");n.classList.add("pushbot-notification"),n.style.opacity=0,n.innerHTML=i,document.body.prepend(n);let e=0,o=setInterval((()=>{e>1&&clearInterval(o),n.style.opacity=e,e+=.01}),10);n.addEventListener("click",(e=>{e.target.classList.contains("allow-btn")?(t(!0),l(n)):e.target.classList.contains("cancel-btn")&&(t(!1),l(n))}))}),o)}))}function l(t){let n=1,e=setInterval((()=>{t.style.opacity=n,n-=.01,n<=0&&(clearInterval(e),t.remove())}),10)}const d=()=>"firefox"===function(){let t,n=navigator.userAgent;return t=n.match(/chrome|chromium|crios/i)?"chrome":n.match(/firefox|fxios/i)?"firefox":n.match(/iPad|iPhone|iPod/i)?"ios":n.match(/safari/i)?"safari":n.match(/opr\//i)?"opera":n.match(/edg/i)?"edge":null,t}(),p=()=>{let t=navigator.userAgent,n=!1;return t.match(/safari/i)&&/iPad|iPhone|iPod/.test(t)&&(n=!0),n};async function u(){try{if("denied"===Notification.permission)return;if("default"===Notification.permission){const t=await r(o.PROMPT_OPTIONS,{}),{prompt_options:n,logo:e}=t;if(n.is_custom_prompt||d()||p()){const t=Date.now(),{frequency:o,max_count:i}=n,s=i?+i:2,r=o?+o:1,a=localStorage.getItem("pushbot_denied_count"),l=localStorage.getItem("pushbot_noti_denied");if(l)if(+a>=s){const n=function(t=1,n=Date.now()){const e=new Date(n);return e.setDate(e.getDate()+t),e.getTime()}(r||1,+l);if(!(n<t))return;localStorage.setItem("pushbot_denied_count",0)}else{const n=function(t=1,n=Date.now()){const e=new Date(n);return e.setHours(e.getHours()+t),e.getTime()}(2,+l);if(!(n<t))return}if(!await c(n,e)){localStorage.setItem("pushbot_noti_denied",Date.now());let t=localStorage.getItem("pushbot_denied_count");return void(t?localStorage.setItem("pushbot_denied_count",+t+1):localStorage.setItem("pushbot_denied_count",1))}if("granted"==await window.Notification.requestPermission())return m().catch(m)}}return"granted"==await window.Notification.requestPermission()&&m().catch((t=>{}))}catch(t){}}async function m(){const{scope:t,swPath:n}=function(){const t=`${window.location.origin}/apps/push-bot/`;return{scope:t,swPath:`${t}worker.js`}}(),o=await navigator.serviceWorker.register(n,{scope:t});let i;o.installing?i=o.installing:o.waiting?i=o.waiting:o.active&&(i=o.active),i&&("activated"==i.state&&(localStorage.getItem(e.SUBSCRIPTION_KEY)?await _(localStorage.getItem(e.SUBSCRIPTION_KEY)):await g(o)),i.addEventListener("statechange",(function(t){"activated"==t.target.state&&g(o)})))}async function g(n){const o={applicationServerKey:function(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(n),o=new Uint8Array(e.length);for(let t=0;t<e.length;++t)o[t]=e.charCodeAt(t);return o}(t),userVisibleOnly:!0};let i=(await n.pushManager.subscribe(o)).toJSON();i=JSON.stringify(i);return localStorage.getItem(e.SUBSCRIPTION_KEY)!==i&&localStorage.setItem(e.SUBSCRIPTION_KEY,i),_(i)}async function _(t){const n=localStorage.getItem(e.SUBSCRIBER_ID)??null,i=Intl.DateTimeFormat().resolvedOptions().timeZone,s=__st?.cid??null;if(!n)return;const a={user_agent:navigator.userAgent,shopify_customer_id:s,subscription_key:t,timezone:i,subscriber_id:n};await r(o.CREATE_OR_UPDATE,a),localStorage.setItem(e.SUBSCRIPTION_KEY,t)}document.addEventListener("DOMContentLoaded",async function(){const t=window.matchMedia("(display-mode: standalone)").matches,n="closed"===localStorage.getItem(e.IOS_WIDGET_CLOSED);if(t||n)return;const i=await r(o.PROMPT_OPTIONS,{}),{prompt_options:s}=i;p()&&s.is_ios_widget&&function(t){let n=function(t){return`\n  <div\n      style="\n        margin: 10px;\n        letter-spacing: 0.7px;\n        position: fixed;\n        bottom: 0;\n        z-index: 1111111;\n        background-color: #101828;\n        color: #fff;\n        padding: 12px;\n        border-radius: 5px;\n        box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n        width: 95%;\n        height: 90px;\n      "\n    >\n      <div\n        style="\n          display: flex;\n          justify-content: space-between;\n          gap: 5px;\n          position: relative;\n        "\n      >\n        <p\n          style="\n            margin: 0;\n            font-family: DM sans, sans-serif;\n            font-weight: 400;\n            font-size: 12px;\n            line-height: 1.43;\n            font-weight: bold !important;\n            color: #fff;\n          "\n        >\n        ${t.ios_widget_options.title}\n        </p>\n        <span\n          style="text-align: right; position: absolute; right: -3px; top: -5px"\n          id="close-ios-widget"\n        >\n          <svg\n            xmlns="http://www.w3.org/2000/svg"\n            viewBox="0 0 50 50"\n            width="15px"\n            height="15px"\n            fill="#FFF"\n          >\n            <path\n              d="M 9.15625 6.3125 L 6.3125 9.15625 L 22.15625 25 L 6.21875 40.96875 L 9.03125 43.78125 L 25 27.84375 L 40.9375 43.78125 L 43.78125 40.9375 L 27.84375 25 L 43.6875 9.15625 L 40.84375 6.3125 L 25 22.15625 Z"\n            />\n          </svg>\n        </span>\n      </div>\n      <h6\n        style="\n  margin: 0;\n  font-weight: 400;\n  font-family: DM sans, sans-serif;\n  font-size: 10px;\n  line-height: 14px !important;\n  color: #fff;\n  margin-top: 5px;\n        "\n      >\n      ${t.ios_widget_options.byline.replace("{{share icon}}",'<span>\n          <svg\n            style="margin-bottom: -3px"\n            width="17"\n            height="15"\n            viewBox="0 0 17 22"\n            fill="none"\n            xmlns="http://www.w3.org/2000/svg"\n          >\n            <path\n              d="M12.25 7.75H14.125C14.6223 7.75 15.0992 7.94754 15.4508 8.29917C15.8025 8.65081 16 9.12772 16 9.625V18.625C16 19.1223 15.8025 19.5992 15.4508 19.9508C15.0992 20.3025 14.6223 20.5 14.125 20.5H2.875C2.37772 20.5 1.90081 20.3025 1.54917 19.9508C1.19754 19.5992 1 19.1223 1 18.625V9.625C1 9.12772 1.19754 8.65081 1.54917 8.29917C1.90081 7.94754 2.37772 7.75 2.875 7.75H4.75M12.25 4.75L8.5 1M8.5 1L4.75 4.75M8.5 1V13.7969"\n              stroke="#2B61C4"\n              stroke-width="1.5"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n            ></path>\n          </svg>\n        </span>')}\n      </h6>\n    </div>\n  `}(t);const o=document.createElement("div");o.setAttribute("id","iosWidgetDiv"),o.style.opacity=0,o.innerHTML=n,document.body.prepend(o);let i=0,s=setInterval((()=>{i>1&&clearInterval(s),o.style.opacity=i,i+=.01}),10);document.getElementById("close-ios-widget").addEventListener("click",(()=>{l(o),localStorage.setItem(e.IOS_WIDGET_CLOSED,"closed")}))}(s)}()),"PushBot"in window||(window.PushBot=async function(){const t=function(){const t={};return""===window.location.search||window.location.search.replace("?","").split("&").forEach((n=>{const e=n.split("=");t[e[0]]=e[1]})),t}();t.utm_source&&"push-bot"===t.utm_source&&(localStorage.setItem(e.CAMPAIGN_ID,t.utm_campaign),localStorage.setItem(e.SUBSCRIBER_ID,t.subscriber_id),localStorage.setItem(e.MEDIUM,t.utm_medium)),localStorage.getItem(e.SUBDOMAIN)||localStorage.setItem(e.SUBDOMAIN,Shopify.shop),"serviceWorker"in navigator&&u()},window.PushBot())}();